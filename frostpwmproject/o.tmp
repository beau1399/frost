.oru[ 112 .andu[ 247 @osccon]] > osccon


.pwm1on[]
.pwmf[1000.0 0]




d .pwm1on is
 
 255 > pr2
 
 .clearbit[ccp1sel @apfcon0] > apfcon0
 
 .setbit[trisb3 @trisb] > trisb
 
 .clearbit[ p1m0 .clearbit [p1m1 @ccp1con]] > ccp1con
 .clearbit[ccp1m0 .clearbit [ccp1m1 @ccp1con]] > ccp1con
 .setbit[ccp1m2 .setbit [ccp1m3 @ccp1con]] > ccp1con

 
 .clearbit[c1tsel0 .clearbit[c1tsel1 @ccptmrs]] > ccptmrs
 .clearbit[tmr2if @pir1] > pir1

 
 
 .clearbit[t2ckps0 .clearbit[t2ckps1 @t2con]] > t2con

 
 .setbit[tmr2on @t2con] > t2con

 
 .clearbit[trisb3 @trisb] > trisb
;


d .pwmf 3 0 is 
  
 
 
 
  if .iszerof[.parm[2].parm[1] ],0,
 
   if  .gtf[.parm[2].parm[1] 1000.0],255, 
 
      .ftou[ .divf[.parm[2].parm[1] 4.0]]
  ,,
 > ccpr1l
 
 
 
 
 
 .addf[.parm[2].parm[1] .mulf[-1.0 .mulf[4.0 .utof[@ccpr1l]]]]
 
 if .gtf[.copyf[] 2.5],
   .setbit[dc1b1 .setbit[dc1b0 @ccp1con]] > ccp1con
 ,

 if .gtf[.copyf[] 1.5],
  .setbit[dc1b1  @ccp1con] > ccp1con
  ,	  
      if .gtf[.copyf[] 0.5],
	  
	  .setbit[dc1b0  @ccp1con] > ccp1con 
	  ,,	  
  ,    
 , 

;
